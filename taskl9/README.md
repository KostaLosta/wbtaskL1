# Конвейер чисел

### Компоненты конвейера

```
[Массив чисел] → [Генератор] → [inputChannel] → [Обработчик] → [outputChannel] → [Вывод] → [stdout]
```

### Горутины

1. **Генератор** (`generator goroutine`)
   - Читает числа из исходного массива
   - Отправляет числа в `inputChannel`
   - Закрывает канал после отправки всех чисел

2. **Обработчик** (`processor goroutine`)
   - Читает числа из `inputChannel`
   - Умножает каждое число на 2
   - Отправляет результат в `outputChannel`
   - Закрывает канал после обработки всех чисел

3. **Вывод** (`output goroutine`)
   - Читает результаты из `outputChannel`
   - Выводит результаты в stdout

### Каналы

- **`inputChannel`** - буферизованный канал для передачи исходных чисел
- **`outputChannel`** - буферизованный канал для передачи обработанных чисел

## Синхронизация

Используется `sync.WaitGroup` для обеспечения корректного завершения всех горутин:
- Каждая горутина вызывает `wg.Done()` при завершении
- Основная горутина вызывает `wg.Wait()` для ожидания завершения всех горутин

## Запуск программы

```bash
cd taskl9
go run main.go
```

## Ключевые особенности реализации

### Буферизованные каналы
```go
inputChannel := make(chan int, len(numbers))
outputChannel := make(chan int, len(numbers))
```
- Размер буфера равен количеству чисел в массиве
- Позволяет избежать блокировки при отправке данных

### Корректное закрытие каналов
```go
defer close(inputChannel)
defer close(outputChannel)
```
- Каналы закрываются с помощью `defer`
- Предотвращает deadlock при чтении из закрытых каналов

### Синхронизация горутин
```go
var wg sync.WaitGroup
wg.Add(1)
go func() {
    defer wg.Done()
    // работа горутины
}()
wg.Wait()
```